<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
</head>
<body ng-app="bdd" ng-init="page=1">
<div ng-controller="MainCtrl" class="container">
    <div ng-hide="page!=1">
        <h1 id="aanvraagscherm">Aanvraagscherm</h1>
        <h3 id="waarvoorlenen">Waarvoor hebt u een lening nodig?</h3>
        <button ng-click="toggleModal('U kunt wellicht beter geen lening nemen als deze enkel voor boodschappen bedoeld is.')" class="btn btn-default" id="boodschappen">Boodschappen</button>
        <button ng-click="toggleModal('U kunt wellicht beter geen lening nemen als deze enkel voor beleggingen bedoeld is.')" class="btn btn-default" id="beleggingen">Beleggingen</button>
        <button ng-click="toggleModal('Waarschijnlijk is een Doorlopend krediet of een Persoonlijke lening de beste keus voor u.')" class="btn btn-default" id="rekeningen">Rekeningen betalen</button>
        <button ng-click="toggleModal('Waarschijnlijk is een Flitskrediet of een Persoonlijke lening de beste keus voor u.')" class="btn btn-default" id="meubels">Meubels</button>
        <button ng-click="toggleModal('Voor de aankoop van een auto is de Autolening de beste keus.')" class="btn btn-default" id="autoaankoop">Auto</button>
        <button ng-click="toggleModal('Bij een verbouwing aan een huis is een Persoonlijke lening, Doorlopend krediet of WOZ-krediet de beste keus.')" class="btn btn-default" id="verbouwing">Verbouwing</button>
        <button ng-click="toggleModal('Voor een huis is een Hypotheek de beste keus qua lening.')" class="btn btn-default" id="huis">Huis</button>
        <h3 id="watvoorlening">Wat voor lening wilt u?</h3>
        <form role="form" name="myform" novalidate>
            <div class="form-group">
                <input type="radio" name="typelening" value="Flitskrediet" id="flits" required="true" ng-model="typelening"/>
                <label for="flits">Flitskrediet</label><br/>
                <input type="radio" name="typelening" value="Persoonlijke lening" id="pers" ng-model="typelening"/>
                <label for="pers">Persoonlijke lening</label><br/>
                <input type="radio" name="typelening" value="Doorlopend krediet" id="door" ng-model="typelening"/>
                <label for="door">Doorlopend krediet</label><br/>
                <input type="radio" name="typelening" value="Autolening" id="auto" ng-model="typelening"/>
                <label for="auto">Autolening</label><br/>
                <input type="radio" name="typelening" value="WOZ-krediet" id="woz" ng-model="typelening"/>
                <label for="woz">WOZ-krediet</label><br/>
                <input type="radio" name="typelening" value="Hypotheek" id="hypo" ng-model="typelening"/>
                <label for="hypo">Hypotheek</label><br/>
            </div>
            <h3 id="hoeveellenen">Hoeveel wilt u lenen?</h3>
            <div class="form-group">
                <label for="amount">Te lenen bedrag</label>
                <input type="number" min="0" max="1000000" name="amount" id="amount" placeholder="Leenbedrag in euro's" ng-model="amount"/>
            </div>
            <button ng-disabled="typelening==null || amount==null" ng-click="page='2';submit()" class="btn btn-default" id="verderPage1">Ga verder</button>
        </form>

        <modal title="Tip" visible="showModal">
            <form role="form">
                <div class="form-group">
                    <p id="tiptekst">{{ tekst }}</p>
                </div>
            </form>
        </modal>
    </div>

    <div ng-hide="page!=2">
        <h2 id="toelichtingscherm">Toelichting leningen</h2>
        <table>
            <tr><td>Gekozen lening: </td><td id="gekozen_typelening">{{typelening}}<td></tr>
            <tr><td>Te lenen bedrag (euro): </td><td id="gekozen_amount">{{amount}}<td></tr>
        </table>
        <p/>
        <form role="form">
            <div class="form-group">
                <input type="radio" name="kennis" value="ja" id="ja" ng-model="kennis"/>
                <label for="ja">Ik heb kennis en ervaring met lenen.</label><br/>
                <input type="radio" name="kennis" value="nee" id="nee" ng-model="kennis"/>
                <label for="nee">Ik heb geen kennis of ervaring met lenen.</label><br/>
            </div>
        </form>
        <div ng-hide="kennis!='nee'" id="leningtoelichting">
            Het is niet in alle gevallen voordelig om een lening af te sluiten. Kijk goed bij de nieuwe lening welke voorwaarden en rente van toepassing is. Let er ook op hoe lang de rente geldig is die jou wordt aangeboden. Soms geldt een rente slechts voor een beperkte tijd. Verder kunnen de maandlasten van een lening lager lijken, omdat minder of helemaal niet meer wordt afgelost op de lening. De lening moet dan wel in de toekomst worden afgelost, terwijl dat misschien niet goed uitkomt. Bijvoorbeeld omdat er minder inkomsten zijn door pensionering. Denk rustig na over het aanbod en vraag uitleg als je iets niet begrijpt.
            <p/>
        </div>
        <button class="btn btn-default" ng-click="page='1'" type="submit" id="terugPage2">Ga terug</button>
        <button class="btn btn-default" ng-click="page='3'" ng-disabled="kennis==null" id="verderPage2">Ga verder</button>

    </div>

    <div ng-hide="page!=3">
        <h2 id="persoonsgegevens">Persoonsgegevens</h2>
        <p/>
        <button class="btn btn-default" ng-click="page='2'" type="submit" id="terugPage3">Ga terug</button>
    </div>

</div>
<script>
var bdd = angular.module('bdd', []);

bdd.controller('MainCtrl', function ($scope) {
    $scope.showModal = false;
    $scope.page=1;
    $scope.toggleModal = function(tekst){
        $scope.showModal = !$scope.showModal;
        $scope.tekst=tekst;
    };
  });

bdd.directive('modal', function () {
    return {
      template: '<div class="modal fade">' +
          '<div class="modal-dialog">' +
            '<div class="modal-content">' +
              '<div class="modal-header">' +
                '<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>' +
                '<h4 class="modal-title">{{ title }}</h4>' +
              '</div>' +
              '<div class="modal-body" ng-transclude></div>' +
            '</div>' +
          '</div>' +
        '</div>',
      restrict: 'E',
      transclude: true,
      replace:true,
      scope:true,
      link: function postLink(scope, element, attrs) {
        scope.title = attrs.title;

        scope.$watch(attrs.visible, function(value){
          if(value == true)
            $(element).modal('show');
          else
            $(element).modal('hide');
        });

        $(element).on('shown.bs.modal', function(){
          scope.$apply(function(){
            scope.$parent[attrs.visible] = true;
          });
        });

        $(element).on('hidden.bs.modal', function(){
          scope.$apply(function(){
            scope.$parent[attrs.visible] = false;
          });
        });
      }
    };
  });
</script>
</body>
</html>